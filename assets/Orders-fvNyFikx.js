import{u as _,a as k,r,j as e,d as D,e as T,f as I,m as E,t as R,L as A,v as z}from"./index-B8v1Da-l.js";function O({products:n}){console.log("products AdsCarousel",n);const m=_(),x=k(t=>t.cart),h=(t,c)=>{const j=t.product_size.split(","),f=t.product_color1.split(","),d={...t,product_size:j[0],product_color1:f[0]};m(D(d)),m(T({message:"Product added successfully!",index:c})),setTimeout(()=>{m(I())},1e3)};r.useEffect(()=>{g(0)},[n]);const[u,l]=r.useState(window.innerWidth);r.useEffect(()=>{const t=()=>{l(window.innerWidth)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);const[p,g]=r.useState(0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"adsCarousel",className:"carousel slide v w-100    rounded-2","data-bs-ride":"carousel",style:{height:"100%"},children:[e.jsx("div",{className:"carousel-inner rounded h-100",children:n.map((t,c)=>e.jsx("div",{className:`h-100 carousel-item rounded ${c===p?"active":""}`,children:e.jsx("div",{className:" w-100 ",children:e.jsxs("div",{className:"product-card p-1",style:{height:"100%"},children:[e.jsxs("a",{href:`/${t.pid}`,target:"_blank",style:{textDecoration:"none",color:"black"},children:[e.jsxs("div",{className:"product-image",style:{position:"relative"},children:[e.jsx("img",{src:t.product_image1,alt:"Product 1"}),e.jsx("div",{className:"offer-tag text-center p-1 text-bold mt-2",style:{position:"absolute",bottom:"15px",right:"15px",fontSize:"0.8rem",padding:"1rem",textDecorationColor:"HighlightText",border:"2px solid",borderRadius:"50px",fontWeight:"bold",backgroundColor:t.offers==="0"?"":"#e8d9b7",opacity:t.offers==="0"?0:.5},children:t.offers==="0"?"No Offer":`${t.offers}% Off`})]}),e.jsxs("div",{className:"product-content d-flex flex-column gap-1 pt-3  px-1 pb-3  ",children:[e.jsxs("div",{className:"",style:{height:"40px",fontSize:"14px",gap:"2px",display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{className:"text-sm line-clamp-1",children:[" ",t.category]}),e.jsx("div",{className:"line-clamp-1",children:t.client_name})]}),e.jsxs("h5",{className:"mt-1",children:[e.jsx("sup",{children:"â‚¹"}),t.product_price,e.jsx("span",{className:"text-decoration-line-through text-muted fs-6 fw-light",children:"599"}),e.jsxs("span",{className:"text-muted",style:{fontSize:"13px"},children:[" ",t.product_stock]})]}),e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between ",children:[e.jsxs("h6",{children:["Size: ",e.jsx("span",{children:t.product_size})]}),e.jsxs("h6",{className:"",children:["Color: ",e.jsx("span",{children:t.product_color1})]})]}),e.jsx("div",{className:"clamped-text",children:t.product_discription.length>40?t.product_discription.slice(0,40)+"...":t.product_discription}),e.jsxs("div",{className:"product-distance text-secondary ",children:["Distance: ",t.distance,"km away."]})]}),x.snackbar.open&&x.snackbar.index===c&&e.jsx("div",{style:{fontSize:"12px"},className:"border text-center rounded w-75 mx-auto",children:x.snackbar.message})]}),e.jsx("div",{className:"cart-btn d-flex justify-content-end px-2",children:e.jsx("button",{className:"btn btn-secondary text-dark",onClick:()=>h(t,c),children:"Add To Cart"})})]})},c)},c))}),e.jsx("button",{className:"carousel-control-prev rounded-circle p-2 ms-1",type:"button","data-bs-target":"#adsCarousel","data-bs-slide":"prev",style:{height:"30px",top:"35%",width:"35px",backgroundColor:"#b3b3b4"},children:e.jsx("span",{className:"carousel-control-prev-icon","aria-hidden":"true"})}),e.jsx("button",{className:"carousel-control-next rounded-circle p-2 me-1",type:"button","data-bs-target":"#adsCarousel","data-bs-slide":"next",style:{height:"30px",top:"35%",width:"35px",backgroundColor:"#b3b3b4"},children:e.jsx("span",{className:"carousel-control-next-icon","aria-hidden":"true"})})]}),e.jsx("br",{}),e.jsx("br",{})]})}const W=()=>{const[n,m]=r.useState([]),x=r.useContext(E),{products:h}=x,u=localStorage.getItem("user"),l=u?JSON.parse(u):null;function p(s){return s.sort((a,i)=>{const o=new Date(a.datetime),N=new Date(i.datetime);return o-N}),s.reverse()}const t=p([{name:"Event 1",datetime:"2024-07-29T22:30:00"},{name:"Event 1",datetime:"2024-07-27T14:30:00"},{name:"Event 2",datetime:"2024-07-25T09:15:00"},{name:"Event 2",datetime:"2024-07-28T09:15:00"},{name:"Event 3",datetime:"2024-07-26T12:00:00"}]);console.log("sorted data",t);const c=()=>{if(!l){console.error("No user data found in localStorage");return}const s={user_id:l.userId};console.log("post data",s),z.post("https://minitgo.com/api/user_orders.php",s).then(a=>{if(console.log("data of order",a.data.data),Array.isArray(a.data.data)){const i=a.data.data.sort((o,N)=>new Date(N.time)-new Date(o.time));m(i.reverse())}else console.error("Expected an array but got:",a.data.data)}).catch(a=>{console.error("There was an error fetching the data!",a)})};r.useEffect(()=>{c();const s=setInterval(c,5e3);return()=>clearInterval(s)},[l==null?void 0:l.userId]);const j=s=>{switch(s.toLowerCase()){case"waiting":return{width:"99%",message:"Waiting for order confirmation",animate:!0};case"rejected":return{width:"0%",message:"Rejected",animate:!1};case"out for delivery":return{width:"65%",message:"Out for delivery",animate:!1};case"finding delivery boy":return{width:"35%",message:"Finding delivery boy",animate:!1};case"delivered":return{width:"100%",message:"Delivered",animate:!1};case"accepted":return{width:"10%",message:"Accepted",animate:!1};default:return{width:"99%",message:"Waiting for order confirmation",animate:!0}}},f=localStorage.getItem("timerSeconds")?parseInt(localStorage.getItem("timerSeconds")):5,[d,S]=r.useState(f),[b,$]=r.useState(!0);r.useEffect(()=>{let s;return b&&d>0?s=setInterval(()=>S(a=>a-1),1e3):!b&&d!==0&&clearInterval(s),()=>clearInterval(s)},[b,d]),r.useEffect(()=>{localStorage.setItem("timerSeconds",d.toString())},[d]);const v=Math.floor(d/3600),y=Math.floor(d%3600/60),w=d%60,C=`${v<10?"0":""}${v}:${y<10?"0":""}${y}:${w<10?"0":""}${w}`;return console.log("order data",n),e.jsx("div",{className:"border ",children:e.jsx("div",{className:" mt-1  ",children:e.jsxs("div",{className:" d-flex  flex-wrap justify-content-center  ",children:[e.jsxs("div",{className:"  col-12 col-md-8",children:[e.jsx("section",{className:"",children:e.jsx("div",{className:" py-3   ",children:e.jsx("div",{className:"mx-2  mx-md-5 ",children:e.jsxs("div",{className:" col-lg-8 col-xl-8 w-100  ",children:[e.jsx("div",{className:"mt-4 pb-4  ",style:{borderBottom:"1px solid  #c4c4c4"},children:e.jsx("div",{className:" ",children:e.jsx("div",{className:" ",style:{padding:0},children:e.jsxs("form",{className:"input-group d-flex  gap-2",children:[e.jsx("input",{type:"search",className:"form-control search-box-m rounded ",style:{border:"2px solid #d4e26b",marginLeft:0},placeholder:"Ex: T-Shirt near me","aria-label":"Search"}),e.jsx("button",{type:"submit",className:"btn btn-outline-success rounded ",children:"Go"})]})})})}),l.userId&&n.length>0&&e.jsx("div",{className:" border bg-body-tertiary  mt-3",style:{borderRadius:"10px"},children:e.jsx("div",{className:"card-header px-4 py-4 col d-flex flex-column gap-2  ",children:e.jsx("div",{className:" d-flex ",children:e.jsxs("h5",{className:"text-muted mb-0  ",children:["Thanks for your Order,"," ",e.jsx("span",{style:{color:"black"},children:l.fullName}),"!"]})})})})]})})})}),l.userId&&e.jsx("section",{className:"gradient-custom mb-5",style:{backgroundColor:""},children:e.jsx("div",{className:"",children:e.jsx("div",{className:"d-flex gap-5 justify-content-start flex-wrap mx-2 mx-md-5",children:e.jsx("div",{className:"col-lg-8 col-xl-8 w-100",children:Array.isArray(n)&&n.length>0?n.map((s,a)=>{const i=j(s.product_status),o=s.quantity*s.product_price;return e.jsx("div",{className:`card mt-2 ${s.product_status.toLowerCase()==="rejected"?"card-disabled":""}`,style:{borderRadius:"10px"},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("p",{className:"lead fw-normal mb-0",style:{color:"#d8dfab"},children:"Receipt"}),e.jsxs("p",{className:"small text-muted mb-0",children:["Order ID : ",s.order_id]})]}),e.jsx("div",{className:"card shadow-0 border",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-2",children:e.jsx("img",{src:s.product_image,className:"img-fluid",alt:"Product"})}),e.jsxs("div",{className:"col-md-2 text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("p",{className:"text-muted mb-0",children:"Name:"}),e.jsx("p",{children:s.product_title})]}),e.jsxs("div",{className:"col-md-2 text-center d-flex justify-content-center align-items-center flex-column",children:[e.jsx("p",{className:"text-muted mb-0 small",children:"Color:"}),e.jsx("p",{children:s.product_color})]}),e.jsxs("div",{className:"col-md-2 text-center d-flex justify-content-center align-items-center flex-column",children:[e.jsx("p",{className:"text-muted mb-0 small",children:"Size:"}),e.jsx("p",{children:s.product_size})]}),e.jsxs("div",{className:"col-md-2 text-center d-flex justify-content-center align-items-center flex-column",children:[e.jsx("p",{className:"text-muted mb-0 small",children:"Payment:"}),e.jsx("p",{children:s.payment_mode})]}),e.jsx("div",{className:"col-md-2 text-center d-flex justify-content-center align-items-center",children:e.jsxs("p",{className:"text-muted mb-0 small",children:["Qty: ",s.quantity]})}),e.jsx("div",{className:"col-md-2 text-center d-flex justify-content-center align-items-center",children:e.jsx("p",{className:"text-muted mb-0 small",children:s.product_price})})]}),e.jsx("hr",{className:"mb-4",style:{backgroundColor:"#e0e0e0",opacity:1}}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-2",children:e.jsx("p",{className:"text-muted small",children:"Track Order"})}),e.jsxs("div",{className:"col-md-10",children:[e.jsx("div",{className:"progress",style:{height:"6px",borderRadius:"16px"},children:e.jsx("div",{className:`progress-bar ${i.animate?"progress-animated":""}`,role:"progressbar",style:{width:i.width,borderRadius:"16px",backgroundColor:"#FFA500"}})}),e.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[e.jsx("p",{children:i.message}),s.product_status.toLowerCase()==="delivered"?e.jsx("p",{children:"Delivered"}):""]}),e.jsxs("div",{className:"d-flex justify-content-between pt-2",children:[e.jsx("p",{className:"fw-bold mb-0",children:"Order Details"}),e.jsxs("p",{className:"mb-0",children:[e.jsx("span",{className:"fw-bold me-4",children:"Total:"}),o," /"]})]}),e.jsx("div",{className:"d-flex justify-content-between",children:e.jsx("p",{className:"mb-0",children:"Invoice:"})}),e.jsxs("div",{className:"d-flex justify-content-between mb-5",children:[e.jsxs("p",{className:"mb-0",children:["Order ID : ",s.order_id]}),e.jsxs("p",{className:"text-muted",children:["Date: ",s.date]}),e.jsxs("p",{className:"text-muted",children:["Time: ",s.time]})]}),s.product_status.toLowerCase()==="delivered"&&e.jsx("div",{className:"timer d-flex justify-content-end flex-wrap",children:e.jsxs("p",{className:"fs-5",children:[e.jsx(R,{style:{marginRight:"10px"}}),C]})})]}),e.jsx("div",{className:"d-flex flex-wrap align-items-center py-3",children:e.jsx(A,{to:"/contact",className:"btn btn-light border rounded-pill mx-1",role:"button","aria-disabled":"",children:"! Report"})}),e.jsx("div",{className:"card-footer border-0 px-4 py-2",style:{backgroundColor:"#E4D6D2",borderRadius:"50px"},children:e.jsxs("h5",{className:"d-flex align-items-center justify-content-center text-dark text-uppercase mb-0",children:["Total paid:"," ",e.jsxs("span",{className:"h2 mb-0 ms-2",children:[o," RS"]})]})})]})]})})]})},s.oid)}):null})})})})]}),e.jsx("div",{className:"  col-10 col-sm-5 col-md-3  px-2 px-lg-5 ",style:{marginBottom:"3.5%"},children:e.jsxs("div",{className:"sticky-top",style:{top:"90px"},children:[e.jsx("div",{className:"card mt-4",children:e.jsx("div",{className:"card-header py-2 rounded-pill ",children:e.jsx("h5",{className:"mb-0 fs-6",children:"Recommended Items"})})}),e.jsx("div",{className:" border rounded   ",style:{border:"1px solid",position:"relative"},children:e.jsx(O,{products:h})})]})})]})})})};export{W as default};
